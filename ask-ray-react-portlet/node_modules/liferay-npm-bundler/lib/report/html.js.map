{"version":3,"sources":["../../src/report/html.js"],"names":["htmlDump","report","_executionDate","_executionTime","_warnings","_versionsInfo","_packages","title","summary","htmlTable","htmlRow","toUTCString","htmlIf","warnings","length","htmlSection","htmlList","versionsInfo","Object","keys","map","pkgName","dependencies","sort","pkgId","name","version","link","allFiles","copiedFiles","exclusions","undefined","packageProcesses","pkg","process","pre","post","babel","preKeys","postKeys","babelKeys","files","preNotice","postNotice","babelNotice","packageProcessesBundlerDetails","htmlSubsection","htmlLogOutput","pluginName","JSON","stringify","plugin","config","logger","source","packageProcessesBabelDetails","filePath","condition","contentGenerator","contents","join","args","arg","columns","slice","content","Array","isArray","column","prefixColumns","prefixCells","rowLoggers","Error","logColums","splice","concat","rows","forEach","cells","i","msgs","messages","push","cell","msg0","sourceCell","level","toUpperCase","things"],"mappings":"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","file":"html.js","sourcesContent":["/* eslint require-jsdoc: off */\nimport pretty from 'pretty-time';\n\nexport function htmlDump(report) {\n\tconst {\n\t\t_executionDate,\n\t\t_executionTime,\n\t\t_warnings,\n\t\t_versionsInfo,\n\t\t_packages,\n\t} = report;\n\n\tconst title = 'Report of liferay-npm-bundler execution';\n\n\tconst summary = htmlTable([\n\t\thtmlRow(\n\t\t\t`<td>Executed at:</td><td>${_executionDate.toUTCString()}</td>`\n\t\t),\n\t\thtmlIf(_executionTime, () =>\n\t\t\thtmlRow(\n\t\t\t\t`<td>Execution took:</td><td>${pretty(_executionTime)}</td>`\n\t\t\t)\n\t\t),\n\t]);\n\n\tconst warnings = htmlIf(_warnings.length > 0, () =>\n\t\thtmlSection('Warnings', htmlList(..._warnings))\n\t);\n\n\tconst versionsInfo = htmlSection(\n\t\t'Bundler environment versions',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\tObject.keys(_versionsInfo).map(pkgName =>\n\t\t\t\thtmlRow(`\n\t\t\t\t\t<td>${pkgName}</td>\n\t\t\t\t\t<td>${_versionsInfo[pkgName]}</td>\n\t\t\t\t`)\n\t\t\t)\n\t\t)\n\t);\n\n\tconst dependencies = htmlSection(\n\t\t'Bundled packages',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\t'Copied files',\n\t\t\t'Excluded files',\n\t\t\t'Exclusions',\n\t\t\t'Linked to',\n\t\t\tObject.keys(_packages)\n\t\t\t\t.sort()\n\t\t\t\t.map(pkgId => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tversion,\n\t\t\t\t\t\tlink,\n\t\t\t\t\t\tallFiles,\n\t\t\t\t\t\tcopiedFiles,\n\t\t\t\t\t\texclusions,\n\t\t\t\t\t} = _packages[pkgId];\n\n\t\t\t\t\treturn htmlRow(`\n\t\t\t\t\t\t<td>${name}</td>\n\t\t\t\t\t\t<td>${version}</td>\n\t\t\t\t\t\t<td>${copiedFiles.length}</td>\n\t\t\t\t\t\t<td>${allFiles.length - copiedFiles.length}</td>\n\t\t\t\t\t\t<td>${exclusions}</td>\n\t\t\t\t\t\t<td>${link === undefined ? '' : link}</td>\n\t\t\t\t\t`);\n\t\t\t\t})\n\t\t)\n\t);\n\n\tconst packageProcesses = htmlSection(\n\t\t'Summary of package transformations',\n\t\thtmlTable(\n\t\t\t'Package',\n\t\t\t'Version',\n\t\t\t'Pre-babel phase plugins',\n\t\t\t'Post-babel phase plugins',\n\t\t\t'Babel phase results',\n\t\t\tObject.keys(_packages)\n\t\t\t\t.sort()\n\t\t\t\t.map(pkgId => {\n\t\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\t\tconst {pre, post, babel} = pkg.process;\n\t\t\t\t\tconst preKeys = Object.keys(pre);\n\t\t\t\t\tconst postKeys = Object.keys(post);\n\t\t\t\t\tconst babelKeys = Object.keys(babel.files);\n\n\t\t\t\t\tconst preNotice = htmlIf(\n\t\t\t\t\t\tpreKeys.length > 0,\n\t\t\t\t\t\t() => `${preKeys.length} plugins applied`\n\t\t\t\t\t);\n\t\t\t\t\tconst postNotice = htmlIf(\n\t\t\t\t\t\tpostKeys.length > 0,\n\t\t\t\t\t\t() => `${postKeys.length} plugins applied`\n\t\t\t\t\t);\n\t\t\t\t\tconst babelNotice = htmlIf(\n\t\t\t\t\t\tbabelKeys.length > 0,\n\t\t\t\t\t\t() => `${babelKeys.length} files processed`\n\t\t\t\t\t);\n\n\t\t\t\t\treturn htmlRow(`\n\t\t\t\t\t\t<td>${pkg.name}</td>\n\t\t\t\t\t\t<td>${pkg.version}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-pre\">\n\t\t\t\t\t\t\t\t${preNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-post\">\n\t\t\t\t\t\t\t\t${postNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href=\"#${pkgId}-babel\">\n\t\t\t\t\t\t\t\t${babelNotice}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t`);\n\t\t\t\t})\n\t\t)\n\t);\n\n\tconst packageProcessesBundlerDetails = htmlSection(\n\t\t'Details of bundler transformations',\n\t\t...Object.keys(_packages)\n\t\t\t.sort()\n\t\t\t.map(pkgId => {\n\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\tconst {pre, post} = pkg.process;\n\t\t\t\tconst preKeys = Object.keys(pre);\n\t\t\t\tconst postKeys = Object.keys(post);\n\n\t\t\t\treturn htmlIf(preKeys.length > 0 || postKeys.length > 0, () =>\n\t\t\t\t\thtmlSubsection(\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t<a name=\"${pkgId}-pre\"></a>\n\t\t\t\t\t\t\t${pkgId}\n\t\t\t\t\t\t`,\n\t\t\t\t\t\thtmlIf(preKeys.length > 0, () =>\n\t\t\t\t\t\t\tpreKeys\n\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t.map(pluginName =>\n\t\t\t\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t\t\t\t['Pre-phase plugin', 'Config'],\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tpluginName,\n\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\tpre[pluginName].plugin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.config\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t[pre[pluginName].logger],\n\t\t\t\t\t\t\t\t\t\t{source: false}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t),\n\t\t\t\t\t\thtmlIf(postKeys.length > 0, () =>\n\t\t\t\t\t\t\tpostKeys\n\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t.map(pluginName =>\n\t\t\t\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t\t\t\t['Post-phase plugin', 'Config'],\n\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\tpluginName,\n\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify(\n\t\t\t\t\t\t\t\t\t\t\t\t\tpost[pluginName].plugin\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.config\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t[post[pluginName].logger],\n\t\t\t\t\t\t\t\t\t\t{source: false}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t})\n\t);\n\n\tconst packageProcessesBabelDetails = htmlSection(\n\t\t'Details of Babel transformations',\n\t\t...Object.keys(_packages)\n\t\t\t.sort()\n\t\t\t.map(pkgId => {\n\t\t\t\tconst pkg = _packages[pkgId];\n\t\t\t\tconst {babel} = pkg.process;\n\t\t\t\tconst babelKeys = Object.keys(babel.files);\n\n\t\t\t\treturn htmlIf(babelKeys.length > 0, () =>\n\t\t\t\t\thtmlSubsection(\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t<a name=\"${pkgId}-babel\"></a>\n\t\t\t\t\t\t\t${pkgId}\n\t\t\t\t\t\t`,\n\t\t\t\t\t\t`<p>\n\t\t\t\t\t\t\tConfiguration: \n\t\t\t\t\t\t\t${JSON.stringify(babel.config)}\n\t\t\t\t\t\t</p>`,\n\t\t\t\t\t\thtmlLogOutput(\n\t\t\t\t\t\t\t['File'],\n\t\t\t\t\t\t\tbabelKeys.sort().map(filePath => [filePath]),\n\t\t\t\t\t\t\tbabelKeys\n\t\t\t\t\t\t\t\t.sort()\n\t\t\t\t\t\t\t\t.map(filePath => babel.files[filePath].logger)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t})\n\t);\n\n\treturn `\n\t\t<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<meta charset=\"utf-8\" />\n\t\t\t\t<title>${title}</title>\n\t\t\t\t<style>\n\t\t\t\t\tbody, h1, h2, h3, p, li {\n\t\t\t\t\t\tfont-family: sans-serif;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tbody, p, th, td, li {\n\t\t\t\t\t\tfont-size: 10pt;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th1 {\n\t\t\t\t\t\tfont-size: 16pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th2 {\n\t\t\t\t\t\tfont-size: 13pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\th3 {\n\t\t\t\t\t\tfont-size: 11pt;\n\t\t\t\t\t\tmargin: 1em 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttable {\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttr:nth-child(odd) {\n\t\t\t\t\t\tbackground-color: #F6F6F6;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tth {\n\t\t\t\t\t\tbackground-color: #F0F0F0;\n\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tth, td {\n\t\t\t\t\t\tpadding: .1em 0;\n\t\t\t\t\t\tvertical-align: top;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttd.info, td.error {\n\t\t\t\t\t\tbackground: green;\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tvertical-align: middle;\n\t\t\t\t\t\twidth: 1px;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\n\t\t\t\t\ttd.error {\n\t\t\t\t\t\tbackground: red;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttd.source {\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t}\n\n\t\t\t\t\tul {\n\t\t\t\t\t\tpadding-left: 1em;\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tp {\n\t\t\t\t\t\tmargin: 0 0 .5em 0;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t\t<script id=\"report\" type=\"application/json\">\n\t\t\t\t\t${JSON.stringify(report)}\n\t\t\t\t</script>\n\t\t\t\t<script>\n\t\t\t\t\twindow.report = JSON.parse(\n\t\t\t\t\t\tdocument.getElementById(\"report\").innerHTML\n\t\t\t\t\t);\n\t\t\t\t</script>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<h1>${title}</h1>\n\t\t\t\t${summary}\n\t\t\t\t${warnings}\n\t\t\t\t${versionsInfo}\n\t\t\t\t${dependencies}\n\t\t\t\t${packageProcesses}\n\t\t\t\t${packageProcessesBundlerDetails}\n\t\t\t\t${packageProcessesBabelDetails}\n\t\t\t</body>\n\t\t</html>\n\t`;\n}\n\nfunction htmlIf(condition, contentGenerator) {\n\treturn condition ? contentGenerator() : '';\n}\n\nfunction htmlSection(title, ...contents) {\n\treturn `\n\t\t<h2>${title}</h2>\n\t\t${contents.join('\\n')}\n\t`;\n}\n\nfunction htmlSubsection(title, ...contents) {\n\treturn `\n\t\t<h3>${title}</h3>\n\t\t${contents.join('\\n')}\n\t`;\n}\n\nfunction htmlList(...args) {\n\treturn `\n\t\t<ul>\n\t\t\t${args.map(arg => `<li>${arg}</li>`).join(' ')}\n\t\t</ul>\n\t`;\n}\n\nfunction htmlTable(...args) {\n\tconst columns = args.slice(0, args.length - 1);\n\tlet content = args[args.length - 1];\n\n\tif (Array.isArray(content)) {\n\t\tcontent = content.join('\\n');\n\t}\n\n\tif (columns.length == 0) {\n\t\treturn `\n\t\t\t<table>\n\t\t\t\t${content}\n\t\t\t</table>\n\t\t`;\n\t} else {\n\t\treturn `\n\t\t\t<table>\n\t\t\t\t${htmlRow(columns.map(column => `<th>${column}</th>`))}\n\t\t\t\t${content}\n\t\t\t</table>\n\t\t`;\n\t}\n}\n\nfunction htmlRow(content) {\n\tif (Array.isArray(content)) {\n\t\tcontent = content.join('\\n');\n\t}\n\n\treturn `<tr>${content}</tr>`;\n}\n\n/**\n * Dump a table with the output of a PluginLogger\n * @param  {Array} prefixColumns [description]\n * @param  {Array<Array>} prefixCells an array with one array per row containing the prefix cell content\n * @param  {Array} rowLoggers an array with one logger per row in prefixCells\n * @param  {boolean} source whether or not to show 'Log source' column\n * @return {String} an HTML table\n */\nfunction htmlLogOutput(\n\tprefixColumns,\n\tprefixCells,\n\trowLoggers,\n\t{source} = {source: true}\n) {\n\tif (prefixCells.length != rowLoggers.length) {\n\t\tthrow new Error(\n\t\t\t'The length of prefixCells and rowLoggers must be the same'\n\t\t);\n\t}\n\n\tlet logColums = ['Message', ''];\n\n\tif (source) {\n\t\tlogColums.splice(0, 0, 'Log source');\n\t}\n\n\tconst columns = prefixColumns.concat(logColums);\n\n\tlet rows = [];\n\n\tprefixCells.forEach((cells, i) => {\n\t\tif (cells.length != prefixColumns.length) {\n\t\t\tthrow new Error(\n\t\t\t\t`Prefix cells row ${i} has an invalid length: ${cells.length}`\n\t\t\t);\n\t\t}\n\n\t\tconst msgs = rowLoggers[i].messages;\n\n\t\tif (msgs.length == 0) {\n\t\t\trows.push(\n\t\t\t\thtmlRow(`\n\t\t\t\t\t${cells.map(cell => `<td>${cell}</td>`).join(' ')}\n\t\t\t\t\t${htmlIf(source, () => `<td></td>`)}\n\t\t\t\t\t${logColums\n\t\t.splice(1)\n\t\t.map(() => '<td></td>')\n\t\t.join(' ')}\n\t\t\t\t`)\n\t\t\t);\n\t\t} else {\n\t\t\tconst msg0 = msgs[0];\n\n\t\t\tlet sourceCell = htmlIf(\n\t\t\t\tsource,\n\t\t\t\t() => `<td class=\"source\">${msg0.source}</td>`\n\t\t\t);\n\n\t\t\trows.push(\n\t\t\t\thtmlRow(`\n\t\t\t\t\t${cells.map(cell => `<td>${cell}</td>`).join(' ')}\n\t\t\t\t\t${sourceCell}\n\t\t\t\t\t<td class=\"${msg0.level}\">${msg0.level.toUpperCase()}</td>\n\t\t\t\t\t<td>${msg0.things.join(' ')}</td>\n\t\t\t\t`)\n\t\t\t);\n\n\t\t\tfor (let i = 1; i < msgs.length; i++) {\n\t\t\t\tsourceCell = htmlIf(\n\t\t\t\t\tsource,\n\t\t\t\t\t() => `<td class=\"source\">${msgs[i].source}</td>`\n\t\t\t\t);\n\n\t\t\t\trows.push(\n\t\t\t\t\thtmlRow(`\n\t\t\t\t\t\t${cells.map(() => `<td></td>`).join(' ')}\n\t\t\t\t\t\t${sourceCell}\n\t\t\t\t\t\t<td class=\"${msgs[i].level}\">\n\t\t\t\t\t\t\t${msgs[i].level.toUpperCase()}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>${msgs[i].things.join(' ')}</td>\n\t\t\t\t\t`)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn htmlTable(...columns, rows);\n}\n"]}